<!-- HEADER FLOTANTE UNIVERSAL -->
<header class="header-flotante">
	<div class="header-container">
		<!-- Logo -->
		<div class="header-logo">
			<a href="/">
				<i class="fas fa-cube"></i>
				<span>EZ</span>
			</a>
		</div>

		<!-- Navegación Principal -->
		<nav class="header-nav" id="headerNav">
			<a href="/dashboard" class="nav-item active">
				<i class="fas fa-home"></i>
				<span>Dashboard</span>
			</a>
			<a href="/contratos" class="nav-item">
				<i class="fas fa-file-contract"></i>
				<span>Contratos</span>
			</a>
			<a href="/chat" class="nav-item">
				<i class="fas fa-comments"></i>
				<span>Chat</span>
			</a>
			<a href="/calendario" class="nav-item">
				<i class="fas fa-calendar"></i>
				<span>Calendario</span>
			</a>
			<a href="/marketplace" class="nav-item">
				<i class="fas fa-store"></i>
				<span>Marketplace</span>
			</a>
		</nav>

		<!-- Derecha: Usuario y Acciones -->
		<div class="header-actions">
			<!-- Saldo (si aplica) -->
			<div class="saldo-badge" id="saldoBadge" style="display: none;">
				<i class="fas fa-wallet"></i>
				<span id="saldoValue">$0</span>
			</div>

			<!-- Notificaciones -->
			<div class="notification-icon">
				<i class="fas fa-bell"></i>
				<span class="notification-count" id="notifCount" style="display: none;">0</span>
			</div>

			<!-- Usuario -->
			<div class="user-menu">
				<button class="user-btn" id="userMenuBtn">
					<img id="userPhoto" src="/images/default-avatar.png" alt="Usuario">
					<i class="fas fa-chevron-down"></i>
				</button>
				<div class="user-dropdown" id="userDropdown">
					<div class="user-info-dropdown">
						<p id="userName">Usuario</p>
						<small id="userRole">Usuario</small>
					</div>
					<hr>
					<a href="/perfil" class="dropdown-item">
						<i class="fas fa-user"></i> Mi Perfil
					</a>
					<a href="/tema" class="dropdown-item">
						<i class="fas fa-palette"></i> Tema
					</a>
					<a href="/seguridad" class="dropdown-item">
						<i class="fas fa-lock"></i> Seguridad
					</a>
					<hr>
					<a href="/logout" class="dropdown-item logout">
						<i class="fas fa-sign-out-alt"></i> Cerrar Sesión
					</a>
				</div>
			</div>

			<!-- Botón Móvil -->
			<button class="header-mobile-btn" id="headerMobileBtn">
				<i class="fas fa-bars"></i>
			</button>
		</div>
	</div>
</header>

<!-- Estilos -->
<style>
	.header-flotante {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		z-index: 1000;
		background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
		backdrop-filter: blur(10px);
	}

	.header-container {
		max-width: 1400px;
		margin: 0 auto;
		padding: 0 20px;
		display: flex;
		align-items: center;
		justify-content: space-between;
		height: 70px;
		gap: 30px;
	}

	/* Logo */
	.header-logo a {
		display: flex;
		align-items: center;
		gap: 10px;
		color: white;
		text-decoration: none;
		font-size: 24px;
		font-weight: bold;
		transition: all 0.3s ease;
		white-space: nowrap;
	}

	.header-logo a:hover {
		transform: scale(1.05);
	}

	.header-logo i {
		font-size: 28px;
	}

	/* Navegación */
	.header-nav {
		display: flex;
		gap: 0;
		flex: 1;
		align-items: center;
		height: 100%;
	}

	.header-nav .nav-item {
		display: flex;
		align-items: center;
		gap: 8px;
		color: rgba(255, 255, 255, 0.8);
		padding: 0 16px;
		text-decoration: none;
		transition: all 0.3s ease;
		border-bottom: 3px solid transparent;
		height: 100%;
		font-size: 14px;
		white-space: nowrap;
	}

	.header-nav .nav-item:hover,
	.header-nav .nav-item.active {
		color: white;
		border-bottom-color: white;
		background: rgba(255, 255, 255, 0.05);
	}

	.header-nav i {
		font-size: 16px;
	}

	/* Acciones derecha */
	.header-actions {
		display: flex;
		align-items: center;
		gap: 20px;
		height: 100%;
	}

	/* Badge de Saldo */
	.saldo-badge {
		display: flex;
		align-items: center;
		gap: 8px;
		background: rgba(255, 255, 255, 0.15);
		padding: 8px 16px;
		border-radius: 20px;
		color: white;
		font-weight: 600;
		font-size: 14px;
		transition: all 0.3s ease;
	}

	.saldo-badge:hover {
		background: rgba(255, 255, 255, 0.25);
	}

	/* Icono de Notificaciones */
	.notification-icon {
		position: relative;
		cursor: pointer;
		color: rgba(255, 255, 255, 0.9);
		font-size: 18px;
		transition: all 0.3s ease;
	}

	.notification-icon:hover {
		color: white;
	}

	.notification-count {
		position: absolute;
		top: -8px;
		right: -8px;
		background: #ff4757;
		color: white;
		border-radius: 50%;
		width: 20px;
		height: 20px;
		display: flex;
		align-items: center;
		justify-content: center;
		font-size: 12px;
		font-weight: bold;
	}

	/* Menú de Usuario */
	.user-menu {
		position: relative;
	}

	.user-btn {
		display: flex;
		align-items: center;
		gap: 10px;
		background: rgba(255, 255, 255, 0.15);
		border: none;
		color: white;
		padding: 8px 12px;
		border-radius: 25px;
		cursor: pointer;
		transition: all 0.3s ease;
		font-size: 14px;
	}

	.user-btn:hover {
		background: rgba(255, 255, 255, 0.25);
	}

	.user-btn img {
		width: 32px;
		height: 32px;
		border-radius: 50%;
		object-fit: cover;
	}

	.user-btn i {
		font-size: 12px;
	}

	/* Dropdown Usuario */
	.user-dropdown {
		position: absolute;
		top: 100%;
		right: 0;
		background: white;
		border-radius: 10px;
		box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
		min-width: 200px;
		margin-top: 10px;
		display: none;
		z-index: 1001;
		overflow: hidden;
	}

	.user-dropdown.show {
		display: block;
		animation: slideDown 0.3s ease;
	}

	@keyframes slideDown {
		from {
			opacity: 0;
			transform: translateY(-10px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	.user-info-dropdown {
		padding: 15px 20px;
	}

	.user-info-dropdown p {
		margin: 0;
		color: #333;
		font-weight: 600;
		font-size: 14px;
	}

	.user-info-dropdown small {
		color: #666;
		font-size: 12px;
	}

	.dropdown-item {
		display: flex;
		align-items: center;
		gap: 12px;
		padding: 12px 20px;
		color: #333;
		text-decoration: none;
		transition: all 0.3s ease;
		font-size: 14px;
	}

	.dropdown-item:hover {
		background: #f5f5f5;
		color: #667eea;
	}

	.dropdown-item.logout {
		color: #ff4757;
	}

	.dropdown-item.logout:hover {
		background: rgba(255, 71, 87, 0.1);
	}

	.dropdown-item i {
		width: 18px;
		text-align: center;
		font-size: 16px;
	}

	.user-dropdown hr {
		margin: 8px 0;
		border: none;
		border-top: 1px solid #eee;
	}

	/* Botón Móvil */
	.header-mobile-btn {
		display: none;
		background: none;
		border: none;
		color: white;
		font-size: 24px;
		cursor: pointer;
		padding: 0;
		z-index: 2000;
	}

	/* Responsivo */
	@media (max-width: 768px) {
		.header-container {
			gap: 15px;
			padding: 0 15px;
		}

		.header-logo a span {
			display: none;
		}

		.header-logo a {
			gap: 0;
		}

		.header-nav {
			display: none;
			position: fixed;
			left: 0;
			top: 70px;
			width: 100%;
			flex-direction: column;
			gap: 0;
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			height: auto;
			z-index: 999;
			border-bottom: 1px solid rgba(255, 255, 255, 0.1);
		}

		.header-nav.show {
			display: flex;
		}

		.header-nav .nav-item {
			width: 100%;
			border: none;
			border-bottom: 1px solid rgba(255, 255, 255, 0.1);
			border-radius: 0;
			padding: 15px 20px;
		}

		.header-nav .nav-item:hover,
		.header-nav .nav-item.active {
			border-bottom: none;
		}

		.header-mobile-btn {
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.header-actions {
			gap: 10px;
		}

		.saldo-badge {
			padding: 6px 12px;
			font-size: 12px;
		}

		.saldo-badge span {
			display: none;
		}

		.notification-icon {
			font-size: 16px;
		}

		.user-btn {
			padding: 6px 8px;
		}

		.user-btn img {
			width: 28px;
			height: 28px;
		}

		.user-btn i {
			display: none;
		}

		.user-btn span {
			display: none;
		}
	}

	/* Asegurar que el contenido esté debajo del header */
	body {
		margin-top: 70px;
	}
</style>

<!-- Scripts -->
<script>
	document.addEventListener('DOMContentLoaded', function() {
		const userMenuBtn = document.getElementById('userMenuBtn');
		const userDropdown = document.getElementById('userDropdown');
		const headerMobileBtn = document.getElementById('headerMobileBtn');
		const headerNav = document.getElementById('headerNav');

		// Toggle menú usuario
		if (userMenuBtn) {
			userMenuBtn.addEventListener('click', function(e) {
				e.stopPropagation();
				userDropdown.classList.toggle('show');
			});
		}

		// Cerrar menú al hacer click fuera
		document.addEventListener('click', function() {
			if (userDropdown) {
				userDropdown.classList.remove('show');
			}
		});

		// Toggle menú móvil
		if (headerMobileBtn) {
			headerMobileBtn.addEventListener('click', function() {
				headerNav.classList.toggle('show');
			});
		}

		// Cerrar menú móvil al hacer click en un item
		document.querySelectorAll('.header-nav .nav-item').forEach(link => {
			link.addEventListener('click', function() {
				headerNav.classList.remove('show');
			});
		});

		// Actualizar navegación activa según la URL actual
		const currentPath = window.location.pathname;
		document.querySelectorAll('.header-nav .nav-item').forEach(link => {
			link.classList.remove('active');
			if (currentPath.includes(link.getAttribute('href'))) {
				link.classList.add('active');
			}
		});
	});
</script>
